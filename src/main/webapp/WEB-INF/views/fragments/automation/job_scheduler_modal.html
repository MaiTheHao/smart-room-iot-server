<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
	<body>
		<div th:fragment="modal_content" class="modal fade" id="automationModal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog modal-lg modal-dialog-centered" role="document">
				<div class="modal-content border-0 shadow-lg">
					<div class="modal-header bg-primary text-white">
						<h5 class="modal-title font-weight-bold" id="modalTitle">
							<i class="fas fa-clock mr-2"></i>
							<span th:text="#{automation.modal.title}">Thiết lập Lịch trình</span>
						</h5>
						<button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>

					<div class="modal-body bg-light">
						<form id="automationForm">
							<input type="hidden" id="autoId" />

							<div class="card shadow-sm border-0 mb-3">
								<div class="card-body p-3">
									<div class="row align-items-center">
										<div class="col-md-12">
											<div class="form-group mb-0">
												<label class="text-uppercase small font-weight-bold text-muted">
													<span th:text="#{automation.modal.name}">Tên tác vụ</span>
													<span class="text-danger">*</span>
												</label>
												<input
													type="text"
													class="form-control font-weight-bold text-primary"
													id="autoName"
													required
													th:placeholder="#{automation.modal.name.placeholder}"
												/>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="card shadow-sm border-0 mb-3">
								<div class="card-header bg-white border-bottom-0">
									<h3 class="card-title font-weight-bold text-dark">
										<i class="fas fa-history mr-2 text-primary"></i>
										<span th:text="#{automation.modal.cycle}">Chu kỳ lặp</span>
									</h3>
								</div>
								<div class="card-body pt-0">
									<!-- Frequency Type Selection -->
									<div class="form-group">
										<label class="text-uppercase small font-weight-bold text-muted" th:text="#{automation.modal.frequency}">Tần suất lặp</label>
										<select class="form-control font-weight-bold custom-select" id="scheduleType">
											<option value="DAILY" th:text="#{automation.modal.freq.daily}">Hàng ngày (Daily)</option>
											<option value="WEEKLY" th:text="#{automation.modal.freq.weekly}">Hàng tuần (Weekly)</option>
											<option value="MONTHLY" th:text="#{automation.modal.freq.monthly}">Hàng tháng (Monthly)</option>
										</select>
									</div>

									<div class="row">
										<!-- Column 1: Frequency Value Config -->
										<div class="col-md-6">
											<!-- Weekly Select -->
											<div class="form-group d-none" id="group-weekly">
												<label class="text-uppercase small font-weight-bold text-muted" th:text="#{automation.modal.weekly.label}">Chọn Thứ</label>
												<select class="form-control font-weight-bold" id="weeklySelect">
													<option value="MON" th:text="#{automation.days.mon}">Thứ Hai</option>
													<option value="TUE" th:text="#{automation.days.tue}">Thứ Ba</option>
													<option value="WED" th:text="#{automation.days.wed}">Thứ Tư</option>
													<option value="THU" th:text="#{automation.days.thu}">Thứ Năm</option>
													<option value="FRI" th:text="#{automation.days.fri}">Thứ Sáu</option>
													<option value="SAT" th:text="#{automation.days.sat}">Thứ Bảy</option>
													<option value="SUN" th:text="#{automation.days.sun}">Chủ Nhật</option>
												</select>
											</div>

											<!-- Monthly Select -->
											<div class="form-group d-none" id="group-monthly">
												<label class="text-uppercase small font-weight-bold text-muted" th:text="#{automation.modal.monthly.label}">Chọn Ngày</label>
												<select class="form-control font-weight-bold" id="monthlySelect">
													<th:block th:each="i : ${#numbers.sequence(1, 31)}">
														<option th:value="${i}" th:text="${i}"></option>
													</th:block>
												</select>
											</div>

											<!-- Daily Info (Visual only) -->
											<div class="form-group" id="group-daily">
												<label class="text-uppercase small font-weight-bold text-muted" th:text="#{automation.modal.cycle}">Chu kỳ</label>
												<input type="text" class="form-control bg-light" th:value="#{automation.modal.daily.info}" disabled />
											</div>
										</div>

										<!-- Column 2: Time Picker -->
										<div class="col-md-6">
											<div class="form-group">
												<label class="text-uppercase small font-weight-bold text-muted" th:text="#{automation.modal.execution.time}">Giờ chạy</label>
												<div class="input-group">
													<div class="input-group-prepend">
														<span class="input-group-text"><i class="far fa-clock"></i></span>
													</div>
													<input type="text" class="form-control font-weight-bold text-center" id="timeOnlyPicker" />
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>

							<div class="form-group mb-0">
								<textarea
									class="form-control bg-light text-muted small"
									id="autoDescription"
									rows="2"
									th:placeholder="#{automation.modal.description.placeholder}"
								></textarea>
							</div>
						</form>
					</div>

					<div class="modal-footer bg-light border-top-0">
						<button type="button" class="btn btn-light text-muted font-weight-bold" data-dismiss="modal" th:text="#{common.btn.cancel}">Hủy bỏ</button>
						<button type="button" class="btn btn-primary px-4 font-weight-bold shadow-sm" id="btnSaveAutomation">
							<i class="fas fa-save mr-1"></i>
							<span th:text="#{automation.modal.btn.save}">Lưu cấu hình</span>
						</button>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
